<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>POS System</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="assets/css/bootstrap.css" rel="stylesheet">


</head>
<body style="background-color: #6c757d">

<header>

    <!--nav logo-->
    <nav class="navbar navbar-expand-lg bg-light" style="background-color: #6c757d">
        <div class="container-fluid shadow p-3 mb-3 bg-body rounded">
            <img height="70" src="../inMemoryPos/assets/image/shopping-cart-svg-png-icon-download-28.png"
                 width="70">
            <a class="navbar-brand" href="#"> Food Store</a>
            <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                    class="navbar-toggler" data-bs-target="#navbarSupportedContent"
                    data-bs-toggle="collapse" type="button">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!--links-->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a aria-current="page" class="nav-link active" href="#Dashbordform" id="home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#Customerform" id="customer">Customers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#Itemform" id="item">Items</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#PlaceOrderform" id="placeOrder">Place Order</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#AllOrderform" id="allOrder">All Order details</a>
                    </li>
                </ul>

                <!--login logout-->
                <ul class="navbar-nav me-6 mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a aria-current="page" class="nav-link" href="#"></i>
                            Sign Up</a>
                    </li>
                    <li class="nav-item">
                        <a aria-current="page" class="nav-link" href="#"></i>
                            Log Out</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<!--dashboard content-->
<main class="container-fluid" id="Dashbordform">
    <br>
    <h1>DASHBOARD</h1>
    <br>

    <!--dashboard content-->
    <div class="jumbotron pt-md-5">
        <div id="home-tiles">
            <div class="row ">
                <div class="col-lg-6 col-xl-3 mb-2 shadow-lg">
                    <div class="card">
                        <div class="card-header bg-success font-weight-bolder"><h3>Customers</h3></div>
                        <div class="card-body">
                            <div class="dash-tile-icon">
                                <img height="70" src="../inMemoryPos/assets/image/add-user.png" width="70">
                            </div>
                            <div class="dash-tile-text text-lg-end text-black"><h2>786</h2></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xl-3 mb-2 shadow-lg">
                    <div class="card">
                        <div class="card-header bg-warning font-weight-bolder"><h3>Items</h3></div>
                        <div class="card-body">
                            <div class="dash-tile-icon">
                                <img height="70" src="../inMemoryPos/assets/image/bag%20-%20Copy.png"
                                     width="70">
                            </div>
                            <div class="dash-tile-text text-lg-end text-black"><h2>335</h2></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xl-3 mb-2 shadow-lg">
                    <div class="card">
                        <div class="card-header bg-info font-weight-bolder"><h3>Orders</h3></div>
                        <div class="card-body">
                            <div class="dash-tile-icon">
                                <img height="70" src="../inMemoryPos/assets/image/edit.png" width="70">
                            </div>
                            <div class="dash-tile-text text-lg-end text-black"><h2>500</h2></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xl-3 mb-2 shadow-lg">
                    <div class="card">
                        <div class="card-header bg-danger font-weight-bolder"><h3>All Order details</h3></div>
                        <div class="card-body">
                            <div class="dash-tile-icon" style="">
                                <img height="70"
                                     src="../inMemoryPos/assets/image/house-black-silhouette-without-door.png"
                                     width="70">
                            </div>
                            <div class="dash-tile-text text-lg-end text-black"><h2>50</h2></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br> <br> <br>
        <div class="text-xxl-center">
            <button class="btn btn-success">Add New Order</button>
        </div>
    </div>

</main>

<!--customer content-->
<main class="container-fluid" id="Customerform">
    <h1>MANAGE CUSTOMER</h1>
    <br>

    <section class="row">
        <div class=" d-flex flex-md-column flex-sm-row">
            <form class="d-flex flex-column flex-sm-row" role="search">
                <input aria-label="Search" class="form-control me-2 " id="txtInput" placeholder="Search" type="search">
                <label class="form-label bg-info" for="txtInput"
                       style="padding: 8px; padding-right: 8px; border-radius: 5px">Search</label>
            </form>
        </div>
    </section>

    <br>

    <form class="row g-3">
        <div class="col-md-6">
            <label class="form-label" for="txtCustomerID">Customer ID :</label>
            <input class="form-control" id="txtCustomerID" placeholder="Ex: C00-001" type="text">
        </div>
        <div class="col-md-6">
            <label class="form-label" for="txtCustomerName">Customer Name :</label>
            <input class="form-control" id="txtCustomerName" placeholder="Ex: chamuditha" type="text">
        </div>
        <div class="col-md-6">
            <label class="form-label" for="txtCustomerAddress">Customer Address :</label>
            <input class="form-control" id="txtCustomerAddress" placeholder="Ex: 123/A, matara." type="text">
        </div>
        <div class="col-md-6">
            <label class="form-label" for="txtCustomerSalary">Customer Salary :</label>
            <input class="form-control" id="txtCustomerSalary" placeholder="Ex: RS. 50 000" type="text">
        </div>

    </form>

    <br>

    <section class="row">
        <div class="container-fluid justify-content-center gap-2 d-flex flex-xxl-row">

            <!-- Button trigger modal -->
            <button class="btn btn-success " id="btnSaveCustomer" type="button">Save
                Customer
            </button>

            <!-- Button trigger modal -->
            <button class="btn btn-warning" id="btnUpdateCustomer" type="button">Update
                Customer
            </button>

            <button class="btn btn-warning" id="btnLoadAll" type="button">Load All
                Customer
            </button>

            <!-- Button trigger modal -->
            <button class="btn btn-danger" id="btnDeleteCustomer" type="button">Delete
                Customer
            </button>
        </div>
    </section>

    <br><br>

    <section class="container-fluid">
        <table aria-selected="true" class="table table-striped">
            <thead class="table-dark">
            <tr>
                <th scope="col">Cus ID</th>
                <th scope="col">Name</th>
                <th scope="col">Address</th>
                <th scope="col">Salary</th>
            </tr>
            </thead>
            <tbody id="tblCustomer"></tbody>
        </table>
    </section>

</main>

<!--item content-->
<main class="container-fluid" id="Itemform">
    <h1>MANAGE ITEMS</h1>
    <br>

    <section class="row">
        <div class=" d-flex flex-md-column flex-sm-row">
            <form class="d-flex flex-column flex-sm-row" role="search">
                <input aria-label="Search" class="form-control me-2 " id="txtInputItem" placeholder="Search"
                       type="search">
                <label class="form-label bg-info" for="txtInputItem"
                       style="padding: 8px; padding-right: 8px; border-radius: 5px">Search</label>
            </form>
        </div>
    </section>

    <br>

    <form class="row g-3">
        <div class="col-md-6">
            <label class="form-label" for="txtItemCode">Item Code :</label>
            <input class="form-control" id="txtItemCode" placeholder="Ex: I00-001" type="text">
        </div>
        <div class="col-md-6">
            <label class="form-label" for="txtItemName">Item Name :</label>
            <input class="form-control" id="txtItemName" placeholder="Ex: Sugar" type="text">
        </div>
        <div class="col-md-6">
            <label class="form-label" for="txtQTY">Quntity :</label>
            <input class="form-control" id="txtQTY" placeholder="Ex: 50Kg" type="text">
        </div>
        <div class="col-md-6">
            <label class="form-label" for="txtUnitPrice">Unit Price :</label>
            <input class="form-control" id="txtUnitPrice" placeholder="Ex: RS. 10 000" type="text">
        </div>
    </form>

    <br>

    <section class="row">
        <div class="container-fluid justify-content-center gap-4 d-flex flex-xxl-row">
            <!-- Button trigger modal -->
            <button class="btn btn-success " id="btnSaveItem" type="button">Save
                Item
            </button>

            <!-- Button trigger modal -->
            <button class="btn btn-warning" id="btnUpdateItem" type="button">Update
                Item
            </button>
            <!--      load all data to table-->
            <button class="btn btn-warning" id="btnLoadAllItem" type="button">load all
                Item
            </button>

            <!-- Button trigger modal -->
            <button class="btn btn-danger" id="btnDeleteIItem" type="button">Delete
                Item
            </button>
        </div>
    </section>

    <br><br>

    <section class="container-fluid">
        <table class="table table-striped">
            <thead class="table-dark">
            <tr>
                <th scope="col">Item Code</th>
                <th scope="col">Item Name</th>
                <th scope="col">Quntity</th>
                <th scope="col">Unit Price</th>
            </tr>
            </thead>
            <tbody id="tblItems"></tbody>
        </table>
    </section>

</main>

<!--Place Order content-->
<main class="container-fluid" id="PlaceOrderform">
    <h1>PLACE ORDER</h1>

    <section class="row justify-content-center">
        <div class="row justify-content-evenly ">

            <!--invoice section-->
            <div class="col-10 col-md-9 col-lg-3 p-3 mt-1 bg-white shadow-lg " style="height: max-content">
                <h3 class="text-center bg-success p-2 text-light ">Invoice</h3>
                <div class="row mt-1">
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="orderId">Order ID:</label>
                        <input class="form-control" id="orderId" type="text">
                    </div>
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="orderDate">Order Date:</label>
                        <input class="form-control" id="orderDate" type="date">
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="inputCustomerID">Customer ID:</label>
                        <select aria-label="Default select example" class="form-select" id="inputCustomerID"
                                onchange="setDetails(this.value)">

                        </select>
                    </div>
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="customerName">Name:</label>
                        <input class="form-control" disabled id="customerName" type="text">
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="customerAddress">Address:</label>
                        <input class="form-control" disabled id="customerAddress" type="text">
                    </div>
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="customerSalary">Salary:</label>
                        <input class="form-control" disabled id="customerSalary" type="text">
                    </div>
                </div>
            </div>

            <!--items-->
            <div class="col-10 col-md-5 col-lg-3 p-3 mt-1 bg-white shadow-lg " style="height: max-content">
                <h3 class="text-center bg-success p-2 text-light">Items</h3>
                <div class="row mt-1">
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="inputItemCode">Item Code:</label>
                        <select aria-label="Default select example" class="form-select" id="inputItemCode"
                                onchange="setIDetails(this.value)">
                            <option selected>Select Item</option>
                        </select>
                    </div>
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="itemName">Item Name:</label>
                        <input class="form-control" disabled id="itemName" type="text">


                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="itemPrice">Unit Price:</label>
                        <input class="form-control" disabled id="itemPrice" type="text">
                    </div>
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="qtyOnHand">Qty On Hand:</label>
                        <input class="form-control" disabled id="qtyOnHand" type="text">
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="buyQty">Order Quntity:</label>
                        <input class="form-control small" id="buyQty" type="text">
                    </div>
                    <div class="col-12 col-md-6 col-lg-6"><br>
                        <button class="btn btn-warning rounded-5" id="btnAddToCart" type="submit">Add to Cart</button>
                    </div>
                </div>
            </div>

            <!--total price-->
            <div class="col-10 col-md-10 col-lg-3 p-3 mt-3 bg-white shadow-lg" style="height: max-content">
                <div class="row">
                    <div class="col-12 col-md-12 col-lg-12">
                        <h3 class="text-start p-1">Total: <span class="text-start text-danger">Rs. <span
                                class="text-start text-danger" id="txtTotal"></span></span>
                        </h3>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="txtCash">Cash (Rs.):</label>
                        <input class="form-control" id="txtCash" type="text">
                    </div>
                    <div class="col-12 col-md-6 col-lg-6">
                        <label class="form-label" for="txtDiscount">Discount:</label>
                        <input class="form-control" id="txtDiscount" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-12 col-lg-12">
                        <h3 class="text-start p-1">Sub Total: Rs. <span class="text-center p-1" id="txtSubTotal"></span>
                        </h3>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-12 col-lg-12">
                        <label class="form-label" for="txtBalance">Balance (Rs.):</label>
                        <input class="form-control" disabled id="txtBalance" type="text">
                    </div>
                </div>
                <br>
                <div class="row">
                    <button class="btn btn-danger rounded-5" id="btnPlaceOrder" type="submit">Place Order</button>
                </div>
            </div>

            <!-- add to cart table-->
            <section class="container-fluid mt-4">
                <table class="table table-striped">
                    <thead class="table-success">
                    <tr>
                        <th scope="col">Item Code</th>
                        <th scope="col">Item Name</th>
                        <th scope="col">Unit Price</th>
                        <th scope="col">QTY</th>
                        <th scope="col">Total</th>
                    </tr>
                    </thead>
                    <tbody id="orderTable">


                    </tbody>
                </table>
            </section>
        </div>
    </section>
</main>

<!--All Order content-->
<main class="container-fluid" id="AllOrderform">
    <br>
    <h1>ALL ORDER DETAILS</h1>
    <br>

    <section class="row">
        <div class=" d-flex flex-md-column flex-sm-row">
            <form class="d-flex flex-column flex-sm-row" role="search">
                <input aria-label="Search" class="form-control me-2 " id="txtAllDetalsInput" placeholder="Search"
                       type="search">
                <label class="form-label bg-info" for="txtInput"
                       style="padding: 8px; padding-right: 8px; border-radius: 5px">Search</label>
            </form>
        </div>
    </section>

    <br><br>

    <section class="container-fluid">
        <table class="table table-striped">
            <thead class="table-dark">
            <tr>
                <th scope="col">Order ID</th>
                <th scope="col">Order Date</th>
                <th scope="col">Customer ID</th>
                <th scope="col">Discount</th>
                <th scope="col">Total Price</th>
            </tr>
            </thead>
            <tbody id="tblAllOrders">
            </tbody>
        </table>
    </section>

</main>


<!--import js-->


<!--import jQuery-->
<!--<script src="assets/js/jquery-3.6.1.min.js"></script>-->
<script src="assets/js/jquery-3.6.1.min.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script>

    /*Show main section and Hide other section*/
    $(document).ready(function () {
        $('#Dashbordform').css('display', 'block')
        $('#Customerform').css('display', 'none');
        $('#Itemform').css('display', 'none');
        $('#PlaceOrderform').css('display', 'none');
        $('#AllOrderform').css('display', 'none');
    });

    /*Show clicking section*/

    /*show dashboard section and hide others*/
    $('#home').click(function () {
        $('#Dashbordform').css('display', 'block')
        $('#Customerform').css('display', 'none');
        $('#Itemform').css('display', 'none');
        $('#PlaceOrderform').css('display', 'none');
        $('#AllOrderform').css('display', 'none');
    });

    /*show customer section and hide others*/
    $('#customer').click(function () {
        $('#Dashbordform').css('display', 'none')
        $('#Customerform').css('display', 'block');
        $('#Itemform').css('display', 'none');
        $('#PlaceOrderform').css('display', 'none');
        $('#AllOrderform').css('display', 'none');
    });

    /*show item section and hide others*/
    $('#item').click(function () {
        $('#Dashbordform').css('display', 'none')
        $('#Customerform').css('display', 'none');
        $('#Itemform').css('display', 'block');
        $('#PlaceOrderform').css('display', 'none');
        $('#AllOrderform').css('display', 'none');
    });

    /*show placeOrder section and hide others*/
    $('#placeOrder').click(function () {
        $('#Dashbordform').css('display', 'none')
        $('#Customerform').css('display', 'none');
        $('#Itemform').css('display', 'none');
        $('#PlaceOrderform').css('display', 'block');
        $('#AllOrderform').css('display', 'none');
    });

    /*show All Order section and hide others*/
    $('#allOrder').click(function () {
        $('#Dashbordform').css('display', 'none')
        $('#Customerform').css('display', 'none');
        $('#Itemform').css('display', 'none');
        $('#PlaceOrderform').css('display', 'none');
        $('#AllOrderform').css('display', 'block');
    });
    let cus = /^(C00-)[0-9]{3}$/;

    $("#txtCustomerID").keyup(function (event) {
        cus = /^(C00-)[0-9]{3}$/;
        let b = cus.test($("#txtCustomerID").val());
        if (b) {
            $("#txtCustomerID").css("border", "2px solid green");
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {

                $("#txtCustomerName").focus();
            }


        } else {
            $("#txtCustomerID").css("border", "2px solid red");
        }

    });

    $("#txtCustomerName").keyup(function (event) {

        let check = /[a-z]{5}/.test($("#txtCustomerName").val())

        if (check) {
            $("#txtCustomerName").css("border", "2px solid green");
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
                $("#txtCustomerAddress").focus();

            }

        } else {
            $("#txtCustomerName").css("border", "2px solid red");
        }
    });

    $("#txtCustomerAddress").keyup(function (event) {

        let check = /[a-z]{5}/.test($("#txtCustomerAddress").val())

        if (check) {
            $("#txtCustomerAddress").css("border", "2px solid green");
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
                $("#txtCustomerSalary").focus();

            }

        } else {
            $("#txtCustomerAddress").css("border", "2px solid red");
        }
    });

    $("#txtCustomerSalary").keyup(function (event) {

        let check = /('(?!0$)[0-9]+(?:\\.[0-9]+)?')/.test($("#txtCustomerSalary").val())

        if (check) {
            $("#txtCustomerAddress").css("border", "2px solid green");
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
                $("#btnSaveCustomer").focus();

            }

        } else {
            $("#txtCustomerSalary").css("border", "2px solid red");
        }
    });


    /*In class assignment*/


    // error

    let cDetails = [];
    $("#btnSaveCustomer").click(function () {
            let customerID = $("#txtCustomerID").val();
            let customerName = $("#txtCustomerName").val();
            let customerAddress = $("#txtCustomerAddress").val();
            let customerSalary = $("#txtCustomerSalary").val();
            // let customerID = $("#txtCustomerID").val();


            let cust = {customerID, customerName, customerAddress, customerSalary};
            let number = cDetails.push(cust);
            if (number != 0) {
                clearCustomerTextField();
            }

            loadAllCustomers();
            customerTableSelect();
        }
        // cDetails = [customerID, customerName, customerAddress, customerSalary];
        // let row = `<tr><td>${customerID}</td><td>${customerName}</td><td>${customerAddress}</td><td>${customerSalary}</td></tr>`;
        //  let row = `<tr><td>${cDetails}</td><td>${cDetails[1]}</td><td>${cDetails[2]}</td><td>${cDetails[3]}</td></tr>`;


        // $("#tblCustomer").append(row);


    );


    function clearCustomerTextField() {
        $("#txtCustomerID").val("");
        $("#txtCustomerName").val("");
        $("#txtCustomerAddress").val("");
        $("#txtCustomerSalary").val("");
        $("#txtCustomerID").focus();

    }

    function clearItemTextField() {
        $("#txtItemCode").val("");
        $("#txtItemName").val("");
        $("#txtUnitPrice").val("");
        $("#txtQTY").val("");
        $("#txtItemCode").focus();

    }


    //laod all customer data to table

    $("#btnLoadAll").click(function () {
        $("#tblCustomer").empty();
        for (let i = 0; i < cDetails.length; i++) {
            let id = cDetails[i].customerID;
            let name = cDetails[i].customerName;
            let address = cDetails[i].customerAddress;
            let salary = cDetails[i].customerSalary;


            let row = `<tr><td>${id}</td><td>${name}</td><td>${address}</td><td>${salary}</td></tr>`;


            $("#tblCustomer").append(row);
        }
        customerTableSelect();

    });

    let itemDetails = [];
    $("#btnSaveItem").click(function () {
        let itemCode = $("#txtItemCode").val();
        let itemName = $("#txtItemName").val();
        let itemQty = $("#txtQTY").val();
        let itemUnitePrice = $("#txtUnitPrice").val();

        let item = {itemCode, itemName, itemQty, itemUnitePrice};
        let number1 = itemDetails.push(item);
        if (number1 != 0) {
            clearItemTextField();
        }
        loadAllItem();
        ItemTableSelect();
    });

    $("#btnLoadAllItem").click(function () {
        $("#tblItems").empty();
        for (let j = 0; j < itemDetails.length; j++) {
            let code = itemDetails[j].itemCode;
            let iName = itemDetails[j].itemName;
            let iQty = itemDetails[j].itemQty;
            let iUnitePrice = itemDetails[j].itemUnitePrice;

            let iRow = `<tr><td>${code}</td><td>${iName}</td><td>${iQty}</td><td>${iUnitePrice}</td></tr>`;
            $("#tblItems").append(iRow);
        }
        ItemTableSelect();
    });

    function loadAllCustomers() {
        $('#inputCustomerID').empty();
        $('#inputCustomerID').append('<option selected>Select Customer</option>');
        for (let index in cDetails) {
            let option = $('<option value="' + index + '">' + cDetails[index].customerID + '</option>');
            $('#inputCustomerID').append(option)


            $("#orderId").val($.now());

        }
    }

    function loadAllItem() {
        $('#inputItemCode').empty();

        $('#inputItemCode').append('<option selected>Select code</option>');
        for (let index in itemDetails) {
            let optionI = $('<option value="' + index + '">' + itemDetails[index].itemCode + '</option>');
            $('#inputItemCode').append(optionI);


        }
    }

    function loadItemName() {
        for (let index in itemDetails) {
            $('#itemName').empty();
            let optionName = $('<option value="' + index + '">' + itemDetails[index].itemName + '</option>');
            $('#itemName').val(itemDetails[index].itemName);
        }
    }

    function customerTableSelect() {
        $("#tblCustomer>tr").click(function () {

            let cId = $(this).children(":eq(0)").text();
            let Cname = $(this).children(":eq(1)").text();
            let addrs = $(this).children(":eq(2)").text();
            let sal = $(this).children(":eq(3)").text();

            $("#txtCustomerID").val(cId);
            $("#txtCustomerName").val(Cname);
            $("#txtCustomerAddress").val(addrs);
            $("#txtCustomerSalary").val(sal);


        });

    }

    function ItemTableSelect() {
        $("#tblItems>tr").click(function () {
            let itemId = $(this).children(":eq(0)").text();
            let itemName = $(this).children(":eq(1)").text();
            let itQt = $(this).children(":eq(2)").text();
            let uPrice = $(this).children(":eq(3)").text();

            $("#txtItemCode").val(itemId);
            $("#txtItemName").val(itemName);
            $("#txtQTY").val(itQt);
            $("#txtUnitPrice").val(uPrice);


        });

    }

    $("#btnDeleteCustomer").click(function () {
        let tempId = $("#txtCustomerID").val();

        for (let c = 0; c < cDetails.length; c++) {
            if (cDetails[c].customerID == tempId) {
                cDetails.splice(c, 1);
                alert("deleted");

            } else {
                alert("not deleted");
            }

        }


    });

    $("#btnDeleteIItem").click(function () {
        let tempcode = $("#txtItemCode").val();

        for (let f = 0; f < itemDetails.length; f++) {
            if (itemDetails[c].itemCode == tempcode) {
                cDetails.splice(f, 1);
                alert("deleted");

            } else {
                alert("not deleted");
            }

        }


    });


    $("#btnUpdateCustomer").click(function () {
        let tempCId = $("#txtCustomerID").val();
        //
        // for (let c = 0; c < cDetails.length; c++) {
        //     if (cDetails[c].customerID==tempId){
        //
        //         alert("deleted");
        //
        //     }else {
        //         alert("not deleted");
        //     }
        //
        // }

        updateCustomer(tempCId);


    });


    function searchCustomer(id) {
        return cDetails.find(function (customer) {
            return customer.customerID == id;
        });
    }

    function updateCustomer(tId) {
        let tempId = $("#txtCustomerID").val();
        let tempname = $("#txtCustomerName").val();
        let tempad = $("#txtCustomerAddress").val();
        let temps = $("#txtCustomerSalary").val();


        let searchCustomer1 = searchCustomer(tId);
        searchCustomer1.customerID = tempId;
        searchCustomer1.customerName = tempname;
        searchCustomer1.customerAddress = tempad;
        searchCustomer1.customerSalary = temps;


    }

    function setDetails(val) {

        $("#customerName").val(cDetails[val].customerName);
        $("#customerAddress").val(cDetails[val].customerAddress);
        $("#customerSalary").val(cDetails[val].customerSalary);

    }

    function setIDetails(val) {
        $("#itemName").val(itemDetails[val].itemName);
        $("#itemPrice").val(itemDetails[val].itemUnitePrice);
        $("#qtyOnHand").val(itemDetails[val].itemQty);
    }

    let addTOCartD = [];

    $("#btnAddToCart").click(function () {
        $("#orderTable").empty();

        let index = $("#inputItemCode").val();
        let code = itemDetails[index].itemCode;
        alert(code + "code fetched from array")
        let iN = $("#itemName").val();
        let iUP = $("#itemPrice").val();
        let oQ = $("#buyQty").val();

        let Tp = iUP * oQ;

        let AddtoCardObj = {
            itemCode : code,
            itemName : iN,
            unitPrice : iUP,
            qty : oQ,
            total : Tp,
        };
        if (addTOCartD.length < 1) {
            addTOCartD.push(AddtoCardObj)
        } else {

            for (let j = 0; j < addTOCartD.length; j++) {

                // alert(codeIndex);
                let codeIndex = searchICode(code);

                if (codeIndex !== -1) {
                    qt = parseInt(addTOCartD[codeIndex].qty)
                    qtad = parseInt(oQ)
                    let tQ = qt + qtad;
                    let Totalp = parseInt(addTOCartD[codeIndex].total + Tp);
                    alert(Totalp)
                    let data = {
                        itemCode : code,
                        itemName : iN,
                        unitPrice : iUP,
                        qty : tQ,
                        total : Totalp,
                    };
                    addTOCartD.splice(codeIndex, 1);

                    addTOCartD.push(data)
                    break;
                } else {
                    addTOCartD.push(AddtoCardObj)
                    break;
                }

            }
        }
        for (let j = 0; j < addTOCartD.length; j++) {

            let code = addTOCartD[j].itemCode;
            let iName = addTOCartD[j].itemName;
            let iQty = addTOCartD[j].qty;
            let TTotal = addTOCartD[j].total;
            let iUnitePrice = addTOCartD[j].unitPrice;

            let row = "<tr>" +
                "<td>" + code + "</td>" +
                "<td>" + iName + "</td>" +
                "<td>" + iUnitePrice + "</td>" +
                "<td>" + iQty + "</td>" +
                "<td>" + TTotal + "</td>" +
                "<tr/>";

            $("#orderTable").append(row);
        }
    });

    function searchICode(code) {
        for (let i = 0; i < addTOCartD.length; i++) {
            if (addTOCartD[i].itemCode == code) {
                return i;
            }
        }
        return -1;
    }


    // orderTable
    // inputItemCode
    // itemName
    // itemPrice
    // buyQty


</script>


</body>
</html>